@page "/slack"
@using BlazorServer.Pages.Slack.Messages
@using BlazorServer.Domain
@using BlazorServer.Pages.Slack.PostNew

@foreach (var message in messages)
{
    <Message Details=@message />
}

<PostMessage OnPosted="HandleNewMessage" />

@code {
    private List<SlackMessage> messages;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        messages = new List<SlackMessage>
    {
            new SlackMessage
            {
                Message = "Hello",
                PostedBy = "Bob",
                PostedOn = DateTime.Now,
            },
            new SlackMessage
            {
                Message = "How are things?",
                PostedBy = "Alice",
                PostedOn = DateTime.Now
            }
        };
    }

    protected void HandleNewMessage(SlackMessage message)
    {
        messages.Add(message);
    }
}